<!DOCTYPE html>
<html lang="es">
<head>
    <title>Mi Nuevo Sitio Web | T칤tulo Personalizado</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="description" content="Mi descripci칩n personal. 춰Bienvenido a mi sitio!"/>
    <meta name="keywords" content="Mi, Sitio, Web, Personal"/>
    <meta http-equiv="content-language" content="es"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/" rel="canonical">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="/images/favicon.ico">

    <style>
        /* Estilos Globales (Adaptados de los nombres de clase del c칩digo original) */

        :root {
            --primary-color: #007bff; /* Color principal (azul, por ejemplo) */
            --secondary-color: #6c757d; /* Color secundario */
            --text-white: #ffffff;
            --bg-blue: #0056b3;
            --fucsia: #ff00ff; /* Usado para resaltar */
        }

        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }

        .wrapper {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* --- Cabecera y Navegaci칩n --- */
        #header {
            background-color: var(--primary-color);
            padding: 10px 0;
        }

        #logo img {
            max-height: 50px;
        }

        .header_links {
            display: flex;
            justify-content: space-around;
            margin-top: 10px;
        }

        .header_button {
            background: none;
            border: none;
            color: var(--text-white);
            padding: 10px 15px;
            cursor: pointer;
            font-weight: bold;
            border-bottom: 3px solid transparent;
        }

        .header_button.active {
            border-bottom: 3px solid var(--fucsia);
        }

        /* --- Contenedor de Login/Registro --- */
        .login_container {
            float: right;
            display: flex;
            align-items: center;
        }

        #register_button, #login_btn {
            padding: 8px 15px;
            margin-left: 10px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            cursor: pointer;
        }

        #register_button {
            background-color: var(--fucsia);
            color: var(--text-white);
        }

        #login_btn {
            background-color: transparent;
            border: 2px solid var(--text-white);
            color: var(--text-white);
        }

        /* --- PopUp de Login (estilos b치sicos) --- */
        #logInPopUp {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--text-white);
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            padding: 20px;
            z-index: 1000;
            min-width: 300px; /* Estilo a침adido para visibilidad */
            text-align: center; /* Estilo a침adido para visibilidad */
        }

        #popUpCloseButton {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.2em;
        }
        
        /* Estilos b치sicos para la secci칩n din치mica */
        .bg-blue {
            background-color: var(--bg-blue);
            color: var(--text-white);
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        .login-box {
            margin-bottom: 10px;
        }
        .login_input {
            width: 90%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .primary-button {
            background-color: var(--primary-color);
            color: var(--text-white);
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 15px;
        }

        /* Estilos para el listado de proyectos */
        #updates-list {
            list-style: none;
            padding: 0;
        }
        #updates-list li {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            margin-bottom: 5px;
            border-radius: 4px;
        }
        #updates-list img {
            max-width: 50px;
            height: auto;
            margin-right: 10px;
            vertical-align: middle;
        }

    </style>
</head>
<body>

    <div id="header" class="homepage">
        <div class="wrapper">
            <div id="logo">
                <a href="/">
                    <img src="/images/logo.svg" alt="Mi Sitio" width="100%"/>
                </a>
            </div>

            <div class="login_container not_logged_in">
                <div id="login_form">
                    <a href="/registration" id="register_button">REGISTRARSE</a>
                    <input type="button" value="ENTRAR" id="login_btn" onclick="openLoginPopUp();"/>
                    <a href="/ayuda"><img src="/images/help_icon.png" style="height: 20px; width: 20px;"/></a>
                </div>
                <div id="logInPopUp" style="display: none">
                    <div id="popUpCloseButton" class="login-close">X</div>
                    <div class="wrap">
                        <div id="main_login_form">
                            <h1 id="login_title">Bienvenido a Mi Sitio</h1>
                            <form name="login" method="post" action="#" id="login_form_submit">
                                <div id="user_box" class="login-box">
                                    <input type="text" name="login[val]" placeholder="Usuario" class="login_input"/>
                                </div>
                                <div id="password_box" class="login-box">
                                    <input type="password" name="login[password]" placeholder="Contrase침a" class="login_input"/>
                                </div>
                                <button id="login-submit" type="submit" class="btn primary-button">ENTRAR</button>
                                <div id="bottom_login_box" class="register_container">
                                    <h3>&iquest;No tienes cuenta?<br><a class="btn" href="/registration" onclick="closeLoginPopUp()">REG칈STRATE</a></h3>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <div class="header_links not_logged_in homepage">
                <button onclick="document.location.href='/'" id="mainbtn_inicio" class="header_button active">INICIO</button>
                <button onclick="document.location.href='/mis-proyectos'" id="mainbtn_juegos" class="header_button">MIS PROYECTOS</button>
                <button onclick="document.location.href='/mis-logros'" id="mainbtn_ganadores" class="header_button">MIS LOGROS</button>
                <button onclick="document.location.href='/contacto'" id="mainbtn_promociones" class="header_button">CONTACTO</button>
                <button onclick="window.open('https://mi-blog.com/')" target="_blank" id="mainbtn_blog" class="header_button">BLOG</button>
            </div>
        </div>
    </div>

    <div class="wrapper home_main_content">
        <div id="content">
            <div class="home_main_banner">
                <img src="/images/mi_banner_principal.jpg" alt="Mi Banner" style="width: 100%;">
            </div>

            <div class="homepage_width">
                <div id="mi_contenido_dinamico" class="bg-blue">
                    <h2>칔ltimas Actualizaciones</h2>
                    <ul id="updates-list">
                        <li>Cargando publicaciones desde Firestore...</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div id="footer">
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-firestore.js"></script>

    <script type="text/javascript">
        // --- CONFIGURACI칍N DE FIREBASE (firebase_config.js) ---
        // *** 游띔 IMPORTANTE: REEMPLAZA ESTO CON TUS CLAVES REALES DE FIREBASE 游띔 ***
        const firebaseConfig = {
            apiKey: "TU_API_KEY", // Reemplazar
            authDomain: "TU_PROJECT_ID.firebaseapp.com", // Reemplazar
            projectId: "TU_PROJECT_ID", // Reemplazar
            storageBucket: "TU_PROJECT_ID.appspot.com", // Reemplazar
            messagingSenderId: "TU_SENDER_ID", // Reemplazar
            appId: "TU_APP_ID" // Reemplazar
        };

        // Inicializa Firebase
        firebase.initializeApp(firebaseConfig);

        // Exporta los servicios que usar치s
        const auth = firebase.auth();
        const db = firebase.firestore();

        // --- L칍GICA DE CARGA DE PROYECTOS (content_loader.js) ---
        function loadProjects() {
            // Se asume que tienes una colecci칩n llamada "proyectos" en Firestore
            db.collection("proyectos").get().then((querySnapshot) => {
                const updatesList = document.getElementById('updates-list');
                updatesList.innerHTML = ''; // Limpiar la lista

                if (querySnapshot.empty) {
                    updatesList.innerHTML = '<li>No hay proyectos para mostrar en Firestore.</li>';
                    return;
                }

                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    const listItem = document.createElement('li');

                    // Muestra el t칤tulo, el enlace y la imagen (Cloudinary URL)
                    listItem.innerHTML = `<a href="${data.link || '#'}"><img src="${data.imageUrl || 'images/default.png'}" alt="${data.title || 'Sin T칤tulo'}"> ${data.title || 'Proyecto sin nombre'}</a>`;
                    
                    updatesList.appendChild(listItem);
                });
            }).catch((error) => {
                const updatesList = document.getElementById('updates-list');
                updatesList.innerHTML = '<li>Error al cargar contenido. Revisa tu consola para m치s detalles.</li>';
                console.error("Error al cargar proyectos: ", error);
            });
        }

        // --- L칍GICA PRINCIPAL (main.js) ---

        // Funci칩n para abrir el pop-up de inicio de sesi칩n
        function openLoginPopUp() {
            $('#logInPopUp').fadeIn(200);
        }

        // Funci칩n para cerrar el pop-up de inicio de sesi칩n
        function closeLoginPopUp() {
            $('#logInPopUp').fadeOut(200);
        }

        // L칩gica que se ejecuta cuando el documento est치 listo
        $(document).ready(function() {
            // Cargar los proyectos de Firestore
            loadProjects();

            // L칩gica para cerrar el pop-up al hacer clic en el bot칩n de cerrar (X)
            $('#popUpCloseButton').on('click', function() {
                closeLoginPopUp();
            });

            // Manejar el env칤o del formulario de login
            $('#login_form_submit').on('submit', function(e) {
                e.preventDefault();
                alert('Formulario de login interceptado. Implementa aqu칤 la l칩gica de autenticaci칩n con Firebase.');
                // Ejemplo: Llama aqu칤 a 'auth.signInWithEmailAndPassword(usuario, contrase침a)'
            });
        });
    </script>
</body>
</html>
